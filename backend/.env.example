# =============================================================================
# Backend Configuration
# =============================================================================
# Copy this file to .env and fill in your values

# =============================================================================
# LLM Provider Configuration
# =============================================================================
# Choose your primary LLM provider: openai, anthropic, or openrouter
LLM_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview

# Anthropic Configuration (optional, for Claude models)
ANTHROPIC_API_KEY=your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-opus-20240229

# OpenRouter Configuration (optional, for unified access to multiple providers)
OPENROUTER_API_KEY=your-openrouter-api-key-here
OPENROUTER_MODEL=anthropic/claude-3-opus

# =============================================================================
# Knowledge Base Configuration
# =============================================================================
# Knowledge Base API URL
KB_SERVICE_URL=http://localhost:8000

# Direct Elasticsearch connection (optional, for advanced queries)
ELASTICSEARCH_URL=http://localhost:9200
KB_INDEX_NAME=open_rabbit_knowledge_base

# Embedding model for KB queries
KB_EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/openrabbit

# =============================================================================
# Server Configuration
# =============================================================================
# Backend API server
HOST=0.0.0.0
PORT=8080

# =============================================================================
# Supervisor Agent Configuration
# =============================================================================
# Enable Knowledge Base integration
KB_ENABLED=true

# Enable checkpointing for restart capability
ENABLE_CHECKPOINTING=true

# Agent timeout in seconds
AGENT_TIMEOUT=600

# Maximum retries for failed agents
MAX_RETRIES=3

# Use mock agents for testing (set to true for development without LLM API)
USE_MOCK_AGENTS=false

# =============================================================================
# Logging and Telemetry
# =============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# OpenTelemetry configuration (optional)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=openrabbit-backend

# =============================================================================
# Langfuse Configuration (for observability and evals)
# =============================================================================
# Get your keys from https://cloud.langfuse.com
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key
LANGFUSE_HOST=https://cloud.langfuse.com
LANGFUSE_ENABLED=true

# =============================================================================
# GitHub Integration
# =============================================================================
# GitHub App credentials (if using GitHub integration)
GITHUB_APP_ID=
GITHUB_PRIVATE_KEY=
GITHUB_WEBHOOK_SECRET=

# =============================================================================
# Redis (for task queue, optional)
# =============================================================================
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# E2B Sandbox Configuration
# =============================================================================
# E2B API key (get from https://e2b.dev/dashboard)
E2B_API_KEY=e2b_xxx

# Sandbox timeout in milliseconds (default: 5 minutes)
E2B_SANDBOX_TIMEOUT_MS=300000

# Custom E2B template ID (optional, uses default code-interpreter if not set)
# Build your template with: e2b template build --dockerfile e2b.Dockerfile --name open-rabbit
E2B_TEMPLATE_ID=

# Maximum retries for sandbox operations before queueing
E2B_MAX_RETRIES=3

# Retry delay in seconds for failed sandbox operations
E2B_RETRY_DELAY_SECONDS=5

# =============================================================================
# Web Search Configuration (for Package Intelligence)
# =============================================================================
# Brave Search API key (get from https://brave.com/search/api/)
# Used to search for package breaking changes, deprecations, and updates
BRAVE_API_KEY=

# Enable/disable web search for package intelligence (default: true)
SEARCH_ENABLED=true

# Search timeout in seconds (default: 10)
SEARCH_TIMEOUT=10

# Maximum search results to return (default: 5)
SEARCH_MAX_RESULTS=5

# Cache TTL for search results in seconds (default: 86400 = 24 hours)
SEARCH_CACHE_TTL=86400

# Maximum cache entries for search results (default: 1000)
SEARCH_CACHE_MAX_ENTRIES=1000

# Cache TTL for package info in seconds (default: 43200 = 12 hours)
PACKAGE_CACHE_TTL=43200

# Maximum cache entries for package info (default: 500)
PACKAGE_CACHE_MAX_ENTRIES=500



KB_ENABLED=true

KNOWLEDGE_BASE_URL=http://localhost:8000

